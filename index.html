<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ruimte Missie, Vormen</title>
  <style>
    :root{
      --panel: rgba(10, 12, 24, 0.55);
      --panel2: rgba(10, 12, 24, 0.35);
      --glow: 0 0 25px rgba(120, 170, 255, 0.25);
      --shadow: 0 18px 40px rgba(0,0,0,0.45);
    }

    html, body { height:100%; }
    body{
      margin:0;
      overflow:hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#fff;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(120,170,255,0.30), transparent 60%),
        radial-gradient(900px 700px at 90% 15%, rgba(255,140,200,0.22), transparent 55%),
        radial-gradient(900px 700px at 50% 90%, rgba(120,255,210,0.12), transparent 55%),
        radial-gradient(circle at top, #121430, #03040a 70%);
    }

    canvas#stars{
      position:fixed;
      inset:0;
      z-index:0;
    }

    .hud{
      position:relative;
      z-index:2;
      padding:18px 20px;
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
    }

    .title{
      display:flex;
      gap:12px;
      align-items:center;
      padding:12px 14px;
      border-radius:18px;
      background: var(--panel);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }
    .badge{
      font-weight:800;
      letter-spacing:0.3px;
      padding:8px 10px;
      border-radius:14px;
      background: rgba(255,255,255,0.10);
      box-shadow: var(--glow);
      white-space:nowrap;
    }
    .subtitle{
      font-size:14px;
      opacity:0.9;
    }

    .rightHUD{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .pill{
      padding:10px 12px;
      border-radius:16px;
      background: var(--panel2);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      font-weight:700;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .pill small{ opacity:0.85; font-weight:600; }

    .btn{
      border:none;
      border-radius:16px;
      padding:10px 12px;
      font-weight:800;
      cursor:pointer;
      background: rgba(255,255,255,0.14);
      color:#fff;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      transition: transform 120ms ease, background 120ms ease;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px) scale(0.99); }
    .btn:hover{ background: rgba(255,255,255,0.18); }

    .stage{
      position:relative;
      z-index:2;
      height: calc(100% - 92px);
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap:18px;
      padding: 0 20px 20px;
      align-items:stretch;
    }

    .card{
      border-radius:26px;
      background: var(--panel);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding:18px;
      position:relative;
      overflow:hidden;
    }

    .planetGlow{
      position:absolute;
      width:520px;
      height:520px;
      border-radius:50%;
      right:-220px;
      top:-260px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.18), rgba(255,255,255,0.02) 45%, transparent 70%);
      filter: blur(1px);
      pointer-events:none;
      opacity:0.9;
    }

    .missionLine{
      font-size:20px;
      font-weight:900;
      letter-spacing:0.2px;
      margin:0 0 10px;
    }

    .prompt{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 14px;
      border-radius:20px;
      background: rgba(255,255,255,0.08);
      box-shadow: var(--glow);
      margin-bottom:14px;
    }

    .shapeBubble{
      width:140px;
      height:140px;
      border-radius:28px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,0.10);
      box-shadow: 0 0 40px rgba(120,170,255,0.20);
      position:relative;
      overflow:hidden;
      flex:0 0 auto;
    }

    .shapeSymbol{
      font-size:88px;
      line-height:1;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,0.35));
      animation: float 2.8s ease-in-out infinite;
    }
    @keyframes float{
      0%{ transform: translateY(0px); }
      50%{ transform: translateY(-14px); }
      100%{ transform: translateY(0px); }
    }

    .instruction{
      text-align:left;
      flex:1;
    }
    .instruction .big{
      font-size:18px;
      font-weight:900;
      margin:0 0 4px;
    }
    .instruction .small{
      margin:0;
      opacity:0.92;
      font-size:14px;
      line-height:1.35;
    }

    .answers{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:12px;
    }
    .answerBtn{
      border:none;
      border-radius:20px;
      padding:16px 14px;
      font-size:20px;
      font-weight:900;
      cursor:pointer;
      background: rgba(255,255,255,0.12);
      color:#fff;
      box-shadow: var(--shadow);
      transition: transform 120ms ease, background 120ms ease;
    }
    .answerBtn:hover{ background: rgba(255,255,255,0.16); transform: translateY(-1px); }
    .answerBtn:active{ transform: translateY(0px) scale(0.99); }

    .side{
      display:grid;
      grid-template-rows: 1fr 0.7fr;
      gap:18px;
    }

    .rocketArea{
      position:relative;
      height:100%;
      border-radius:26px;
      background: linear-gradient(180deg, rgba(255,255,255,0.07), rgba(255,255,255,0.03));
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .rocket{
      position:absolute;
      left:50%;
      bottom:18px;
      transform: translateX(-50%);
      font-size:88px;
      filter: drop-shadow(0 18px 22px rgba(0,0,0,0.35));
      transition: bottom 900ms ease, transform 900ms ease;
      z-index:2;
    }

    .thruster{
      position:absolute;
      left:50%;
      bottom:4px;
      transform: translateX(-50%);
      font-size:40px;
      opacity:0.0;
      transition: opacity 200ms ease;
      z-index:1;
    }

    .stickerLayer{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:3;
    }

    .sticker{
      position:absolute;
      width:160px;
      height:auto;
      opacity:0.0;
      transform: scale(0.9) rotate(-2deg);
      transition: opacity 180ms ease, transform 220ms ease;
      filter: drop-shadow(0 14px 18px rgba(0,0,0,0.35));
    }
    .sticker.show{
      opacity:1.0;
      transform: scale(1.0) rotate(0deg);
    }

    .coach{
      margin:0;
      font-size:16px;
      line-height:1.45;
      opacity:0.95;
    }

    .miniTips{
      margin-top:10px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }
    .chip{
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,0.10);
      font-weight:800;
      font-size:14px;
      box-shadow: var(--glow);
      user-select:none;
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:22px;
      transform: translateX(-50%);
      z-index:5;
      padding:14px 16px;
      border-radius:18px;
      background: rgba(10,12,24,0.65);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      font-weight:900;
      opacity:0;
      transition: opacity 180ms ease, transform 180ms ease;
      pointer-events:none;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-6px);
    }

    .confetti{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:4;
    }

    .muteHint{
      font-size:12px;
      opacity:0.85;
      margin-left:6px;
      font-weight:700;
    }

    @media (max-width: 980px){
      .stage{ grid-template-columns: 1fr; height: auto; }
      body{ overflow:auto; }
    }
  </style>
</head>

<body>
  <canvas id="stars"></canvas>

  <div class="hud">
    <div class="title">
      <div class="badge">üöÄ Ruimte Missie</div>
      <div>
        <div style="font-weight:900; font-size:16px;">Vormen reddingsactie</div>
        <div class="subtitle">Bewegen, kijken, kiezen, juichen</div>
      </div>
    </div>

    <div class="rightHUD">
      <div class="pill">
        <span>‚≠ê</span>
        <span id="score">0</span>
        <small>punten</small>
      </div>
      <button class="btn" id="newBtn">Nieuwe vorm</button>
      <button class="btn" id="soundBtn">üîä geluid<span class="muteHint" id="soundHint"></span></button>
    </div>
  </div>

  <div class="stage">
    <div class="card">
      <div class="planetGlow"></div>
      <p class="missionLine">Mission control zegt</p>

      <div class="prompt">
        <div class="shapeBubble" aria-label="vorm">
          <div class="shapeSymbol" id="shapeSymbol">‚ö™</div>
        </div>
        <div class="instruction">
          <p class="big" id="instructionBig">Zoek dezelfde vorm in het lokaal</p>
          <p class="small" id="instructionSmall">Ren, wijs, maak de vorm met je lichaam, kom terug en kies het juiste woord</p>
        </div>
      </div>

      <div class="answers" id="answers"></div>

      <p class="coach" id="coachText">
        Tip, maak het extra fysiek: laat kinderen springen als astronaut, landen bij een voorwerp met die vorm, en daarna pas klikken.
      </p>

      <div class="miniTips">
        <div class="chip">Astronaut sprong</div>
        <div class="chip">Vorm met armen</div>
        <div class="chip">Vind het in de klas</div>
        <div class="chip">Samen checken</div>
      </div>
    </div>

    <div class="side">
      <div class="card rocketArea">
        <div class="stickerLayer" id="stickerLayer">
          <img class="sticker" id="stickerA" alt="sticker A" />
          <img class="sticker" id="stickerB" alt="sticker B" />
        </div>

        <div class="confetti" id="confetti"></div>

        <div class="rocket" id="rocket">üöÄ</div>
        <div class="thruster" id="thruster">üî•</div>

        <div style="position:absolute; left:14px; top:14px; z-index:2; font-weight:900; opacity:0.95;">
          Raket status
          <div style="font-size:13px; opacity:0.85; font-weight:700; margin-top:4px;" id="statusLine">
            Klaar voor lancering
          </div>
        </div>
      </div>

      <div class="card">
        <p class="missionLine" style="margin-bottom:10px;">Sticker instellingen</p>
        <p class="coach" style="margin-bottom:10px;">
          Plak hier je eigen Giphy sticker urls in de code, bij STICKERS_GOOD en STICKERS_OOPS.
          Tip, kies transparante stickers, die lijken echt op een sticker op het scherm.
        </p>
        <p class="coach" style="opacity:0.85;">
          Let op, sommige schoolnetwerken blokkeren externe gif bronnen, dan zie je wel het spel maar geen stickers.
        </p>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">Goed gedaan</div>

  <script>
    // 1) VORMEN
    const SHAPES = [
      { name: "cirkel", symbol: "‚ö™" },
      { name: "vierkant", symbol: "üü¶" },
      { name: "driehoek", symbol: "üî∫" },
      { name: "rechthoek", symbol: "‚ñ≠" },
      { name: "ovaal", symbol: "ü•ö" }
    ];

    // 2) STICKERS
    // Plak hier Giphy media urls, bijvoorbeeld een mediaX.giphy.com link naar een gif of webp
    // GIPHY levert directe media urls per item, zie hun schema, url velden in renditions Ó®Å1Ó®Ç
    // Je kunt ook via giphy.com naar een sticker gaan en de embed optie gebruiken, maar img is hier het simpelst Ó®Å2Ó®Ç

    const STICKERS_GOOD = [
      // Voorbeeld placeholders, vervang door jouw favoriete Giphy sticker urls
      "https://media1.giphy.com/media/cZ7rmKfFYOvYI/200.gif",
      "https://media1.giphy.com/media/cZ7rmKfFYOvYI/200_d.gif"
    ];

    const STICKERS_OOPS = [
      "https://media1.giphy.com/media/cZ7rmKfFYOvYI/100.gif",
      "https://media1.giphy.com/media/cZ7rmKfFYOvYI/100w.gif"
    ];

    // 3) GAME STATE
    let current = null;
    let score = 0;
    let soundOn = true;

    // 4) ELEMENTS
    const elScore = document.getElementById("score");
    const elShapeSymbol = document.getElementById("shapeSymbol");
    const elAnswers = document.getElementById("answers");
    const elRocket = document.getElementById("rocket");
    const elThruster = document.getElementById("thruster");
    const elToast = document.getElementById("toast");
    const elStatus = document.getElementById("statusLine");
    const elStickerA = document.getElementById("stickerA");
    const elStickerB = document.getElementById("stickerB");
    const elSoundBtn = document.getElementById("soundBtn");
    const elSoundHint = document.getElementById("soundHint");

    // 5) SOUND, simpele bliepjes via WebAudio, werkt zonder bestanden
    const AudioCtx = window.AudioContext || window.webkitAudioContext;
    let audioCtx = null;

    function ensureAudio(){
      if (!soundOn) return;
      if (!AudioCtx) return;
      if (!audioCtx) audioCtx = new AudioCtx();
      if (audioCtx.state === "suspended") audioCtx.resume();
    }

    function beep({freq=440, dur=0.12, type="sine", gain=0.05} = {}){
      if (!soundOn) return;
      ensureAudio();
      if (!audioCtx) return;

      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type = type;
      o.frequency.value = freq;
      g.gain.value = gain;
      o.connect(g);
      g.connect(audioCtx.destination);
      o.start();

      setTimeout(() => { o.stop(); }, Math.max(30, dur * 1000));
    }

    function goodSound(){
      beep({freq:523, dur:0.10, type:"triangle", gain:0.05});
      setTimeout(()=>beep({freq:659, dur:0.10, type:"triangle", gain:0.05}), 90);
      setTimeout(()=>beep({freq:784, dur:0.12, type:"triangle", gain:0.05}), 180);
    }

    function oopsSound(){
      beep({freq:220, dur:0.12, type:"sine", gain:0.05});
      setTimeout(()=>beep({freq:196, dur:0.14, type:"sine", gain:0.05}), 120);
    }

    // 6) HELPERS
    function pick(arr){
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function shuffle(arr){
      const a = [...arr];
      for(let i=a.length-1; i>0; i--){
        const j = Math.floor(Math.random() * (i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function setToast(text){
      elToast.textContent = text;
      elToast.classList.add("show");
      setTimeout(()=>elToast.classList.remove("show"), 900);
    }

    function showStickers(type){
      const good = type === "good";
      const list = good ? STICKERS_GOOD : STICKERS_OOPS;

      const leftUrl = pick(list);
      const rightUrl = pick(list);

      elStickerA.src = leftUrl;
      elStickerB.src = rightUrl;

      elStickerA.style.left = "14px";
      elStickerA.style.top = "18px";

      elStickerB.style.right = "14px";
      elStickerB.style.bottom = "18px";

      elStickerA.classList.add("show");
      elStickerB.classList.add("show");

      setTimeout(()=>{
        elStickerA.classList.remove("show");
        elStickerB.classList.remove("show");
      }, 950);
    }

    function confettiBurst(){
      const host = document.getElementById("confetti");
      host.innerHTML = "";
      const n = 26;
      for(let i=0;i<n;i++){
        const s = document.createElement("div");
        const size = 6 + Math.random()*10;
        s.style.position = "absolute";
        s.style.left = (45 + (Math.random()*10 - 5)) + "%";
        s.style.top = (55 + (Math.random()*10 - 5)) + "%";
        s.style.width = size + "px";
        s.style.height = size + "px";
        s.style.borderRadius = (Math.random() > 0.5) ? "999px" : "4px";
        s.style.background = "rgba(255,255,255," + (0.55 + Math.random()*0.35) + ")";
        s.style.opacity = "0.95";
        s.style.transform = "translate(-50%,-50%)";
        s.style.filter = "drop-shadow(0 10px 10px rgba(0,0,0,0.25))";
        const dx = (Math.random()*520 - 260);
        const dy = -(200 + Math.random()*260);
        s.animate(
          [
            { transform:"translate(-50%,-50%) translate(0px,0px) rotate(0deg)", opacity:0.95 },
            { transform:`translate(-50%,-50%) translate(${dx}px,${dy}px) rotate(${Math.random()*520}deg)`, opacity:0.0 }
          ],
          { duration: 900 + Math.random()*380, easing:"cubic-bezier(.2,.8,.2,1)" }
        );
        host.appendChild(s);
      }
      setTimeout(()=> host.innerHTML = "", 1400);
    }

    function rocketLaunch(){
      elThruster.style.opacity = "1";
      elRocket.style.bottom = "420px";
      elRocket.style.transform = "translateX(-50%) rotate(-2deg)";
      setTimeout(()=>{
        elThruster.style.opacity = "0";
        elRocket.style.bottom = "18px";
        elRocket.style.transform = "translateX(-50%) rotate(0deg)";
      }, 1050);
    }

    function buildAnswers(){
      const options = shuffle(SHAPES).slice(0, 4);
      if (!options.some(o => o.name === current.name)){
        options[0] = current;
      }
      const final = shuffle(options);

      elAnswers.innerHTML = "";
      final.forEach(opt => {
        const b = document.createElement("button");
        b.className = "answerBtn";
        b.textContent = opt.name;
        b.onclick = () => check(opt.name);
        elAnswers.appendChild(b);
      });
    }

    function newRound(){
      current = pick(SHAPES);
      elShapeSymbol.textContent = current.symbol;
      elStatus.textContent = "Vind de vorm, " + current.name;
      buildAnswers();
    }

    function check(answer){
      if (answer === current.name){
        score += 1;
        elScore.textContent = score;
        elStatus.textContent = "Yes, juiste vorm";
        setToast("Top, dat is " + current.name);
        showStickers("good");
        confettiBurst();
        rocketLaunch();
        goodSound();
        setTimeout(newRound, 1100);
      } else {
        elStatus.textContent = "Bijna, probeer nog eens";
        setToast("Oeps, kijk nog een keer");
        showStickers("oops");
        oopsSound();
      }
    }

    // 7) SOUND TOGGLE
    function renderSound(){
      elSoundBtn.textContent = soundOn ? "üîä geluid" : "üîá geluid";
      elSoundHint.textContent = soundOn ? "" : " tik om aan te zetten";
    }
    elSoundBtn.addEventListener("click", () => {
      soundOn = !soundOn;
      if (soundOn) ensureAudio();
      renderSound();
    });
    renderSound();

    // 8) BUTTONS
    document.getElementById("newBtn").addEventListener("click", newRound);

    // 9) STARS BACKGROUND
    const canvas = document.getElementById("stars");
    const ctx = canvas.getContext("2d");
    let W, H;
    let stars = [];

    function resize(){
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
      stars = [];
      const count = Math.floor((W*H)/18000);
      for(let i=0;i<count;i++){
        stars.push({
          x: Math.random()*W,
          y: Math.random()*H,
          r: 0.4 + Math.random()*1.8,
          a: 0.25 + Math.random()*0.75,
          tw: 0.002 + Math.random()*0.006,
          sp: 0.05 + Math.random()*0.22
        });
      }
    }

    function draw(){
      ctx.clearRect(0,0,W,H);
      for(const s of stars){
        s.x -= s.sp;
        if (s.x < -10) s.x = W + 10;
        s.a += (Math.random() > 0.5 ? s.tw : -s.tw);
        s.a = Math.max(0.15, Math.min(0.95, s.a));

        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
        ctx.fillStyle = "rgba(255,255,255," + s.a + ")";
        ctx.fill();
      }
      requestAnimationFrame(draw);
    }

    window.addEventListener("resize", resize);

    // Start
    resize();
    draw();
    newRound();
  </script>
</body>
</html>